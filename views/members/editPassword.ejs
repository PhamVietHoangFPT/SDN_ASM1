<%- include('../layouts/header') %>

  <div class="container mt-5">
    <div class="card shadow-lg p-4">
      <h2 class="text-primary">Change Password</h2>

      <% if (error) { %>
        <div class="alert alert-danger">
          <%= error %>
        </div>
        <% } %>

          <form action="changePassword" method="POST">
            <div class="mb-3">
              <label for="oldPassword" class="form-label">Old Password</label>
              <input type="password" class="form-control" name="oldPassword" id="oldPassword" required />
            </div>

            <div class="mb-3">
              <label for="newPassword" class="form-label">New Password</label>
              <input type="password" class="form-control" name="newPassword" id="newPassword" required />
            </div>

            <div class="mb-3">
              <label for="confirmPassword" class="form-label">Confirm Password</label>
              <input type="password" class="form-control" name="confirmPassword" id="confirmPassword" required />
            </div>

            <div class="alert alert-danger d-none" id="error-message">
              Passwords do not match!
            </div>

            <div class="d-flex gap-2">
              <button type="submit" class="btn btn-primary">Change Password</button>
              <button type="button" class="btn btn-secondary"
                onclick="window.location.href='/members/profile'">Cancel</button>
            </div>
          </form>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.querySelector("form");
      const errorMessage = document.getElementById("error-message");

      form.addEventListener("submit", function (event) {
        const newPassword = document.getElementById("newPassword").value;
        const confirmPassword = document.getElementById("confirmPassword").value;

        if (newPassword !== confirmPassword) {
          event.preventDefault(); // Chặn gửi form
          errorMessage.classList.remove("d-none"); // Hiển thị lỗi
        } else {
          errorMessage.classList.add("d-none"); // Ẩn lỗi nếu đúng
        }
      });
    });
  </script>

  <%- include('../layouts/footer') %>